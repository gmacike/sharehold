{% extends "circulation/base.html" %}
{% load static %}
{% load widget_tweaks %}
<!-- {% load pagination %} -->

{% block content %}

<div class="jumbotron content pl-3">
  <h1>Przyjęcie zwrotu</h1>

  <form class="lending-form" method="post">
    {% include "sharehold/formfieldsgenerator.html" %}

    {% if request.session.warehouse_context_pk %}
      <button type="submit" class="btn btn-primary">Przyjmij zwrot</button>
    {% else %}
      <a href="{% url 'warehouse_index' %}" class="btn btn-danger">Wybierz magazyn do pracy</a>
    {% endif %}
  </form>


<!--
  <div class="container-fluid lending_list">

    {% if customer %}
      <h2 class="w-100">Klient: {{ customer.nick }}</h2>

      <a class="btn btn-secondary" href="{% url 'circulation_customerlendings' pk=customer.pk %}">Wszystkie wypożyczenia klienta</a>

      <div class="row no-gutters">
        {% for lending in boardgamelending_list.all %}
          <div class="d-flex flex-wrap col-md-4 col-sm-6 lendingentry p-2">
            {% with commodity=lending.container.commodity %}
              <div class="row no-gutters">
                <h4 class="w-100">{{ commodity.catalogueEntry.itemLabel }}</h4>
                <div class="col-4">
                  {% if commodity.getImage %}
                    <img class="img-responsive img-thumbnail" src="{{commodity.getImage.url}}">
                  {% else %}
                    <img class="img-responsive img-thumbnail" src="{% static 'noimage.png' %}">
                  {% endif %}
                </div>
                <div class="col-8 pl-1">
                  <p>Z magazynu: {{ lending.container.warehouse.name }}</p>
                  <p>Rozpoczęto: {{ lending.issued }}</p>
                </div>
                <div class="col-12 d-flex justify-content-end">
                  {% if perms.circulation.change_boardgamelending %}
                    {% if request.session.warehouse_context_pk %}
                      {% if request.session.warehouse_context_pk == lending.container.warehouse.pk %}
                        <a class="btn btn-primary" href="{% url 'lending_finish' pk=lending.pk %}">Przyjmij zwrot</a>
                      {% else %}
                        <p class="help-block">Zwrot możliwy tylko do magazynu: {{ lending.container.warehouse }}</p>
                      {% endif %}
                    {% else %}
                      <a href="{% url 'warehouse_index' %}" class="btn btn-danger">Wybierz magazyn do pracy</a>
                    {% endif %}
                  {% endif %}
                </div>
              </div>
            {% endwith %}
          </div>
        {% empty %}
          <p>Brak informacji o niezakończonych wypożyczeniach Klienta.</p>
        {% endfor %}
      </div>
    {% endif %}
  </div> -->
</div>

<!-- {% if is_paginated %}
  <div class="container">
    {% paginator 5%}
  </div>
{% endif %} -->

<script type="text/javascript" src="{% static 'admin/js/vendor/jquery/jquery.js' %}"></script>
{{ form.media }}

{% endblock %}
